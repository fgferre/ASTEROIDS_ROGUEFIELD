<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroids Survivor - Jogo Espacial</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="game-container">
        <!-- Menu Principal -->
        <div id="menu-screen" class="screen">
            <div class="menu-content">
                <h1 class="game-title">ASTEROIDS SURVIVOR</h1>
                <p class="game-subtitle">Sobreviva Ã s ondas infinitas de asteroides espaciais!</p>
                <div class="instructions">
                    <p>ðŸš€ <strong>WASD</strong> para acelerar a nave espacial</p>
                    <p>âš¡ Tiro automÃ¡tico com mira no asteroide mais prÃ³ximo</p>
                    <p>ðŸ’Ž Colete orbes de XP com campo magnÃ©tico!</p>
                    <p>ðŸ”¥ Escolha upgrades tecnolÃ³gicos espaciais</p>
                    <p>ðŸŒŒ Sobreviva Ã s ondas de asteroides fragmentados</p>
                </div>
                <button id="start-game-btn" class="btn btn--primary btn--lg">INICIAR MISSÃƒO!</button>
            </div>
        </div>

        <!-- Tela de Level Up -->
        <div id="levelup-screen" class="screen hidden">
            <div class="levelup-content">
                <h2 class="levelup-title">UPGRADE TECNOLÃ“GICO!</h2>
                <p id="levelup-text" class="levelup-subtitle">Level X - Escolha sua tecnologia:</p>
                <div id="upgrades-container" class="upgrades-grid">
                    <!-- Upgrades serÃ£o inseridos aqui dinamicamente -->
                </div>
            </div>
        </div>

        <!-- Tela de Game Over -->
        <div id="gameover-screen" class="screen hidden">
            <div class="gameover-content">
                <h1 class="gameover-title">MISSÃƒO FALHADA</h1>
                <div class="stats">
                    <p>Level AlcanÃ§ado: <span id="final-level" class="stat-value">0</span></p>
                    <p>Asteroides DestruÃ­dos: <span id="final-kills" class="stat-value">0</span></p>
                    <p>Ondas Completadas: <span id="final-waves" class="stat-value">0</span></p>
                    <p>Tempo de Voo: <span id="final-time" class="stat-value">0s</span></p>
                </div>
                <button id="restart-game-btn" class="btn btn--secondary btn--lg">NOVA MISSÃƒO</button>
            </div>
        </div>

        <!-- UI do Jogo -->
        <div id="game-ui" class="hidden">
            <!-- UI Superior -->
            <div class="top-ui">
                <div class="ui-stat health">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                    <span id="health-display">100/100</span>
                </div>
                <div class="ui-stat level">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    <span id="level-display">Level 1</span>
                </div>
                <div class="ui-stat kills">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    <span id="kills-display">0 asteroides</span>
                </div>
                <div class="ui-stat time">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                        <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                    </svg>
                    <span id="time-display">0s</span>
                </div>
            </div>

            <!-- InformaÃ§Ãµes da Onda -->
            <div class="wave-ui">
                <div class="wave-info">
                    <h3 id="wave-title">Setor 1</h3>
                    <div id="wave-timer" class="wave-timer">
                        <span class="timer-label">Tempo restante:</span>
                        <span id="wave-timer-display" class="timer-value">60s</span>
                    </div>
                    <div id="wave-progress" class="wave-progress">
                        <div id="wave-progress-bar" class="wave-progress-bar"></div>
                    </div>
                    <p id="wave-enemies">Asteroides: 0 eliminados</p>
                </div>
                <div id="wave-countdown" class="wave-countdown hidden">
                    <h3>PrÃ³ximo Setor em:</h3>
                    <div id="countdown-timer" class="countdown-timer">10</div>
                </div>
            </div>

            <!-- Barra de XP -->
            <div class="xp-container">
                <div class="xp-bar">
                    <div id="xp-progress" class="xp-progress"></div>
                </div>
                <div id="xp-text" class="xp-text">XP: 0 / 100</div>
            </div>

            <!-- Canvas do Jogo -->
            <canvas id="game-canvas" width="800" height="600"></canvas>
            
            <!-- Controles -->
            <div class="controls">
                <p>Use <strong>WASD</strong> para acelerar a nave â€¢ Tiro automÃ¡tico com mira â€¢ Campo magnÃ©tico ativo!</p>
            </div>
        </div>
    </div>

    <!-- MÃ³dulos Core (carregados primeiro para estarem disponÃ­veis globalmente) -->
    <script type="module" src="./core/EventBus.js"></script>
    <script type="module" src="./core/ServiceLocator.js"></script>

    <script type="module" src="app.js"></script>
</body>
</html>